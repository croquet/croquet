<html>
<head>
<script type="module" src="doc.mjs"></script>
<script type="module" src="wrap.mjs"></script>
<script type="module">
import {Doc, DocView} from './doc.mjs';

window.onload = function () {
    let tests = [
        [
            [{text: "he"}, {text: "ll", style: {font: "Roboto", size: 10}}, {text: 'o!'}],
            [{text: "hello!", start: 0, end: 6}]
        ],

        [
            [{text: "he"}, {text: "ll", style: {font: "Roboto", size: 10}}, {text: 'o!', style: {font: "Comic"}}],
            [{text: "hell", start: 0, end: 4}, {text: "o!", style: {font: "Comic"}, start: 4, end: 6}]
        ],
    ];
        
    tests.forEach(([runs, expected]) => {
        let td = new Doc();
        let result = td.canonicalize(runs)
        console.log(result, JSON.stringify(expected) === JSON.stringify(result));
    });

    let doc = new Doc();

    let testRun = [{text: 'Hell'}, {text: 'o'}, {text: '\n World!'}];

    doc.load(testRun);

    console.log(doc.doc);

    let view = new DocView(doc);
    view.setDefault("Roboto", 10);
    view.width(100);
    view.layout();
    console.log('lines', view.lines);
    console.log('words', view.words);

    console.log('paint', view.paint());
}
</script>

</head>
<body>
</body>
</html>

