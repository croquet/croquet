<html>
<head>
<script type="module" src="./warota.mjs"></script>
<script type="module" src="./wrap.mjs"></script>
<script type="module" src="./MockContext.mjs"></script>
<script type="module">
import {Doc} from "./warota.mjs";

window.onload = function () {
    let doc = new Doc();
    let user1 = {id: '010203', color: '010203'};
    window.doc = doc;

    doc.load([{text: "man"}]);
    doc.doSelect(user1, 1, 1);
    doc.doInsert(user1, [{text: 'A'}]);

    console.log(doc.plainText(), doc.plainText() === "mAan");
    doc.doInsert(user1, [{text: 'B'}]);

    console.log(doc.plainText(), doc.plainText() === "mABan");

    doc.doSelect(user1, 5, 5);
    doc.doInsert(user1, [{text: 'C'}]);
    console.log(doc.plainText(), doc.plainText() === "mABanC");

    doc.doSelect(user1, 1, 3);
    doc.doInsert(user1, [{text: 'D'}]);
    console.log(doc.plainText(), doc.plainText() === "mDanC");

    doc.doSelect(user1, 5, 5);
    doc.doDelete(user1, true);
    console.log(doc.plainText(), doc.plainText() === "mDan");

    doc.doSelect(user1, 0, 4);
    doc.doDelete(user1, true);
    console.log(doc.plainText(), doc.plainText() === "");

    doc.doInsert(user1, [{text: 'A'}]);
    console.log(doc.plainText(), doc.plainText() === "A");

    doc.doInsert(user1, [{text: 'B'}]);
    console.log(doc.plainText(), doc.plainText() === "AB");
}
</script>

</head>
<body>
</body>
</html>
