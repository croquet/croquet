<!DOCTYPE html>
<html lang="en">
<head>
    
    
    
    
    <meta charset="utf-8">
    <title>Global - Croquet SDK @CROQUET_VERSION@</title>
    <meta name="description" content="Documentation for the Croquet SDK" />
    
        <meta name="keywords" content="croquet" />
        <meta name="keyword" content="croquet" />
    
    <link rel="icon" type="image/png" href="images/icon.png">
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        nav img { max-width: 210px; margin-top: 10px; }
        .corner-ribbon {
            width: 200px;
            background: #f33;
            position: fixed;
            top: 25px;
            left: -50px;
            text-align: center;
            line-height: 50px;
            letter-spacing: 1px;
            color: #eee;
            box-shadow: 0 0 5px rgba(0,0,0,.5);
            transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
        }
        .corner-ribbon.top-right {
            top: 25px;
            right: -50px;
            left: auto;
            transform: rotate(45deg);
            -webkit-transform: rotate(45deg);
        }
    </style>
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    <a href="index.html"><img src="images/logotype.png"></a>
    
    <h2><a href="index.html#quickstart"><h3>QUICKSTART</h3></a></h2><h3>Globals</h3><ul><li><a href="global.html#Constants">Constants</a></li></ul><h3>Classes</h3><ul><li><a href="Model.html">Model</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Model.html#.create">create</a></li><li data-type='method' style='display: none;'><a href="Model.html#.register">register</a></li><li data-type='method' style='display: none;'><a href="Model.html#.wellKnownModel">wellKnownModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#.types">types</a></li><li data-type='method' style='display: none;'><a href="Model.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Model.html#destroy">destroy</a></li><li data-type='method' style='display: none;'><a href="Model.html#publish">publish</a></li><li data-type='method' style='display: none;'><a href="Model.html#subscribe">subscribe</a></li><li data-type='method' style='display: none;'><a href="Model.html#unsubscribe">unsubscribe</a></li><li data-type='method' style='display: none;'><a href="Model.html#unsubscribeAll">unsubscribeAll</a></li><li data-type='method' style='display: none;'><a href="Model.html#future">future</a></li><li data-type='method' style='display: none;'><a href="Model.html#random">random</a></li><li data-type='method' style='display: none;'><a href="Model.html#now">now</a></li><li data-type='method' style='display: none;'><a href="Model.html#beWellKnownAs">beWellKnownAs</a></li><li data-type='method' style='display: none;'><a href="Model.html#getModel">getModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#wellKnownModel">wellKnownModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#modelOnly">modelOnly</a></li></ul></li><li><a href="View.html">View</a><ul class='methods'><li data-type='method' style='display: none;'><a href="View.html#detach">detach</a></li><li data-type='method' style='display: none;'><a href="View.html#publish">publish</a></li><li data-type='method' style='display: none;'><a href="View.html#subscribe">subscribe</a></li><li data-type='method' style='display: none;'><a href="View.html#unsubscribe">unsubscribe</a></li><li data-type='method' style='display: none;'><a href="View.html#unsubscribeAll">unsubscribeAll</a></li><li data-type='method' style='display: none;'><a href="View.html#future">future</a></li><li data-type='method' style='display: none;'><a href="View.html#random">random</a></li><li data-type='method' style='display: none;'><a href="View.html#now">now</a></li><li data-type='method' style='display: none;'><a href="View.html#externalNow">externalNow</a></li><li data-type='method' style='display: none;'><a href="View.html#extrapolatedNow">extrapolatedNow</a></li><li data-type='method' style='display: none;'><a href="View.html#update">update</a></li><li data-type='method' style='display: none;'><a href="View.html#wellKnownModel">wellKnownModel</a></li></ul></li><li><a href="Session.html">Session</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Session.html#.join">join</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="global.html#event:view-join">view-join</a></li><li><a href="global.html#event:view-exit">view-exit</a></li><li><a href="global.html#event:synced">synced</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-1_1_hello_world.html"> Hello World</a></li><li><a href="tutorial-1_2_simple_animation.html"> Simple Animation</a></li><li><a href="tutorial-1_3_multiuser_chat.html"> Multiuser Chat</a></li><li><a href="tutorial-1_4_view_smoothing.html"> View Smoothing</a></li><li><a href="tutorial-1_5_3d_animation.html"> 3D Animation</a></li><li><a href="tutorial-2_1_model_view_reflector.html"> Model-View-Reflector</a></li><li><a href="tutorial-2_2_writing_a_croquet_app.html"> Writing a Croquet Application</a></li><li><a href="tutorial-2_3_writing_a_croquet_view.html"> Writing a Croquet View</a></li><li><a href="tutorial-2_4_writing_a_croquet_model.html"> Writing a Croquet Model</a></li><li><a href="tutorial-2_5_sim_time_and_future.html"> Simulation Time and Future Sends</a></li><li><a href="tutorial-2_6_events_pub_sub.html"> Events & Publish/Subscribe</a></li><li><a href="tutorial-2_7_snapshots.html"> Snapshots</a></li><li><a href="tutorial-2_8_random.html"> Randomness & Determinism</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Global</h1>
    

    




<section>

<header>
    
        <h2>
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>




            

            
        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="Constants"><span class="type-signature">(constant) </span>Constants<span class="type-signature"></span></h4>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>User-defined Constants</strong></p>
<p>To ensure that all users in a session execute the exact same Model code, the session id
is derived by <a href="Model.html#.register">hashing</a> the source code of Model classes and value of constants.
To hash your own constants, put them into <code>Croquet.Constants</code> object.</p>
<p>The constants can be used in both Model and View.</p>
<p><strong>Note:</strong> the Constants object is recursively
<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze">frozen</a>
once a session was started, to avoid accidental modification.</p>
</div>







    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Q = Croquet.Constants;
Q.ANSWER = 42;
Q.POWERLEVEL = 9000;

class MyModel extends Croquet.Model {
    init() {
         this.answer = Q.ANSWER;
         this.level = Q.POWERLEVEL;
    }
}</code></pre>



        
    

    

    

    
        <h3 class="subsection-title">Events</h3>

        
            

    

    <h4 class="name" id="event:view-join">view-join</h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><a href="Model.html#sessionId"><code>this.sessionId</code></a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><code>&quot;view-join&quot;</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>viewId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the joining user's local viewId</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p><strong>Published when a new user enters the session, or re-enters after being temporarily disconnected.</strong></p>
<p>This is a model-only event, meaning views can not handle it directly (as of <strong>0.3.1</strong>).</p>
<p><strong>Note:</strong> Each <code>&quot;view-join&quot;</code> event is guaranteed to be followed by a <a href="global.html#event:view-exit"><code>&quot;view-exit&quot;</code></a>
event when that user leaves the session, or when the session is cold-started from a persistent snapshot.</p>
<p>Hint: In the view, you can access the local viewId as <a href="View.html#viewId"><code>this.viewId</code></a>, and compare
it to the argument in this event, e.g. to associate the view side with an avatar on the model side.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>class MyModel extends Croquet.Model {
    init() {
        this.userData = {};
        this.subscribe(this.sessionId, "view-join", this.addUser);
        this.subscribe(this.sessionId, "view-exit", this.deleteUser);
    }
    addUser(viewId) {
        this.userData[viewId] = { start: this.now() };
        this.publish(this.sessionId, "user-added", viewId);
    }
    deleteUser(viewId) {
        const time = this.now() - this.userData[viewId].start;
        delete this.userData[viewId];
        this.publish(this.sessionId, "user-deleted", {viewId, time});
    }
}
MyModel.register("MyModel");
class MyView extends Croquet.View {
    constructor(model) {
        super(model);
        for (const viewId of Object.keys(model.userData)) this.userAdded(viewId);
        this.subscribe(this.sessionId, "user-added", this.userAdded);
        this.subscribe(this.sessionId, "user-deleted", this.userDeleted);
    }
    userAdded(viewId) {
        console.log(`${ this.viewId === viewId ? "local" : "remote"} user ${viewId} came in`);
    }
    userDeleted({viewId, time}) {
        console.log(`${ this.viewId === viewId ? "local" : "remote"} user ${viewId} left after ${time / 1000} seconds`);
    }
}</code></pre>





















        
            

    

    <h4 class="name" id="event:view-exit">view-exit</h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><a href="Model.html#sessionId"><code>this.sessionId</code></a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><code>&quot;view-exit&quot;</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>viewId</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the user's id</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p><strong>Published when a user leaves the session, or is disconnected.</strong></p>
<p>This is a model-only event, meaning views can not handle it directly (as of <strong>0.3.1</strong>).</p>
<p>This event will be published when a view tab is closed, or is disconnected due
to network interruption or inactivity.  A view is deemed to be inactive if
10 seconds pass without an execution of the Croquet <a href="Session.html#.join">main loop</a>;
this will happen if, for example, the browser tab is hidden.  As soon as the tab becomes
active again the main loop resumes, and the session will reconnect, causing
a <a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a> event to be published.  The <code>viewId</code>
will be the same as before.</p>
<p><strong>Note:</strong> when starting a new session from a snapshot, <code>&quot;view-exit&quot;</code> events will be
generated for all of the previous users before the first <a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a>
event of the new session.</p>
<h4 id="example">Example</h4>
<p>See <a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a> event</p>
</div>




























        
            

    

    <h4 class="name" id="event:synced">synced</h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><a href="View.html#viewId"><code>this.viewId</code></a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><code>&quot;synced&quot;</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"><p><code>true</code> if in sync, <code>false</code> if backlogged</p></td>
        </tr>

    
    </tbody>
</table>






<div class="description">
    <p><strong>Published when the session backlog crosses a threshold.</strong> (see <a href="View.html#externalNow">View#externalNow</a> for backlog)</p>
<p>This is a non-replicated view-only event.</p>
<p>If this is the main session, it also indicates that the scene was revealed (if data is <code>true</code>)
or hidden behind the overlay (if data is <code>false</code>).</p>
<pre class="prettyprint source"><code>this.subscribe(this.viewId, &quot;synced&quot;, this.handleSynced);
</code></pre>
</div>




























        
    
</article>

</section>





    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>