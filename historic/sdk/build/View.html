<!DOCTYPE html>
<html lang="en">
<head>
    
    
    
    
    <meta charset="utf-8">
    <title>View - Croquet SDK @CROQUET_VERSION@</title>
    <meta name="description" content="Documentation for the Croquet SDK" />
    
        <meta name="keywords" content="croquet" />
        <meta name="keyword" content="croquet" />
    
    <link rel="icon" type="image/png" href="images/icon.png">
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        nav img { max-width: 210px; margin-top: 10px; }
        .corner-ribbon {
            width: 200px;
            background: #f33;
            position: fixed;
            top: 25px;
            left: -50px;
            text-align: center;
            line-height: 50px;
            letter-spacing: 1px;
            color: #eee;
            box-shadow: 0 0 5px rgba(0,0,0,.5);
            transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
        }
        .corner-ribbon.top-right {
            top: 25px;
            right: -50px;
            left: auto;
            transform: rotate(45deg);
            -webkit-transform: rotate(45deg);
        }
    </style>
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    <a href="index.html"><img src="images/logotype.png"></a>
    
    <h2><a href="index.html#quickstart"><h3>QUICKSTART</h3></a></h2><h3>Globals</h3><ul><li><a href="global.html#Constants">Constants</a></li></ul><h3>Classes</h3><ul><li><a href="Model.html">Model</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Model.html#.create">create</a></li><li data-type='method' style='display: none;'><a href="Model.html#.register">register</a></li><li data-type='method' style='display: none;'><a href="Model.html#.wellKnownModel">wellKnownModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#.types">types</a></li><li data-type='method' style='display: none;'><a href="Model.html#init">init</a></li><li data-type='method' style='display: none;'><a href="Model.html#destroy">destroy</a></li><li data-type='method' style='display: none;'><a href="Model.html#publish">publish</a></li><li data-type='method' style='display: none;'><a href="Model.html#subscribe">subscribe</a></li><li data-type='method' style='display: none;'><a href="Model.html#unsubscribe">unsubscribe</a></li><li data-type='method' style='display: none;'><a href="Model.html#unsubscribeAll">unsubscribeAll</a></li><li data-type='method' style='display: none;'><a href="Model.html#future">future</a></li><li data-type='method' style='display: none;'><a href="Model.html#random">random</a></li><li data-type='method' style='display: none;'><a href="Model.html#now">now</a></li><li data-type='method' style='display: none;'><a href="Model.html#beWellKnownAs">beWellKnownAs</a></li><li data-type='method' style='display: none;'><a href="Model.html#getModel">getModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#wellKnownModel">wellKnownModel</a></li><li data-type='method' style='display: none;'><a href="Model.html#modelOnly">modelOnly</a></li></ul></li><li><a href="View.html">View</a><ul class='methods'><li data-type='method' style='display: none;'><a href="View.html#detach">detach</a></li><li data-type='method' style='display: none;'><a href="View.html#publish">publish</a></li><li data-type='method' style='display: none;'><a href="View.html#subscribe">subscribe</a></li><li data-type='method' style='display: none;'><a href="View.html#unsubscribe">unsubscribe</a></li><li data-type='method' style='display: none;'><a href="View.html#unsubscribeAll">unsubscribeAll</a></li><li data-type='method' style='display: none;'><a href="View.html#future">future</a></li><li data-type='method' style='display: none;'><a href="View.html#random">random</a></li><li data-type='method' style='display: none;'><a href="View.html#now">now</a></li><li data-type='method' style='display: none;'><a href="View.html#externalNow">externalNow</a></li><li data-type='method' style='display: none;'><a href="View.html#extrapolatedNow">extrapolatedNow</a></li><li data-type='method' style='display: none;'><a href="View.html#update">update</a></li><li data-type='method' style='display: none;'><a href="View.html#wellKnownModel">wellKnownModel</a></li></ul></li><li><a href="Session.html">Session</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Session.html#.join">join</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="global.html#event:view-join">view-join</a></li><li><a href="global.html#event:view-exit">view-exit</a></li><li><a href="global.html#event:synced">synced</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-1_1_hello_world.html"> Hello World</a></li><li><a href="tutorial-1_2_simple_animation.html"> Simple Animation</a></li><li><a href="tutorial-1_3_multiuser_chat.html"> Multiuser Chat</a></li><li><a href="tutorial-1_4_view_smoothing.html"> View Smoothing</a></li><li><a href="tutorial-1_5_3d_animation.html"> 3D Animation</a></li><li><a href="tutorial-2_1_model_view_reflector.html"> Model-View-Reflector</a></li><li><a href="tutorial-2_2_writing_a_croquet_app.html"> Writing a Croquet Application</a></li><li><a href="tutorial-2_3_writing_a_croquet_view.html"> Writing a Croquet View</a></li><li><a href="tutorial-2_4_writing_a_croquet_model.html"> Writing a Croquet Model</a></li><li><a href="tutorial-2_5_sim_time_and_future.html"> Simulation Time and Future Sends</a></li><li><a href="tutorial-2_6_events_pub_sub.html"> Events & Publish/Subscribe</a></li><li><a href="tutorial-2_7_snapshots.html"> Snapshots</a></li><li><a href="tutorial-2_8_random.html"> Randomness & Determinism</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">View</h1>
    

    




<section>

<header>
    
        <h2>
        View
        </h2>
        
            <div class="class-description"><p>Views are the non-replicated part of a Croquet Application.
Each device and browser window creates its own independend local view.
The view <a href="View.html#subscribe">subscribes</a> to events <a href="Model.html#publish">published</a>
by the replicated model, so it stays up to date in real time.</p>
<p>What the view is showing, however, is completely up to the application developer.
The view can adapt to the device it's running on and show very different things.</p>
<p><strong>Croquet makes no assumptions about the UI framework you use</strong> - be it plain HTML or Three.js or React or whatever.
Croquet only provides the publish/subscribe mechanism to hook into the replicated model simulation.</p>
<p>It's possible for a single view instance to handle all the events, you don't event have to subclass Croquet.View for that.
That being said, a common pattern is to make a hierarchy of <code>Croquet.View</code> subclasses to mimic your hierarchy of <a href="Model.html">Model</a> subclasses.</p></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="View"><span class="type-signature"></span>new View<span class="signature">(model)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>A View instance is created in <a href="Session.html#.join">Session.join</a>, and the root model is passed into its constructor.</p>
<p>This inherited constructor does not use the model in any way.
Your constructor should recreate the view state to exactly match what is in the model.
It should also <a href="View.html#subscribe">subscribe</a> to any changes published by the model.
Typically, a view would also subscribe to the browser's or framework's input events,
and in response <a href="View.html#publish">publish</a> events for the model to consume.</p>
<p>The constructor will, however, register the view and assign it an <a href="View.html#id">id</a>.</p>
<p><strong>Note:</strong> When your view instance is no longer needed, you must <a href="View.html#detach">detach</a> it.
Otherwise it will be kept in memory forever.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>model</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="Model.html">Model</a></span>


            
            </td>

            

            

            <td class="description last"><p>the view's model</p></td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="id"><span class="type-signature"></span>id<span class="type-signature"> :String</span></h4>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Each view has an id which can be used to scope <a href="View.html#publish">events</a> between views.
It is unique within the session for each user.</p>
<p><strong>Note:</strong> The <code>id</code> is <strong>not</strong> currently guaranteed to be unique for different users.
Views on multiple devices may or may not be given the same id.</p>
<p>This property is read-only. It is assigned in the view's constructor. There will be an error if you try to assign to it.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>this.publish(this.id, "changed");</code></pre>



        
            
<h4 class="name" id="sessionId"><span class="type-signature"></span>sessionId<span class="type-signature"> :String</span></h4>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Identifies the shared session.</strong></p>
<p>The session id is used as &quot;global&quot; scope for events like the model-only
<a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a> and <a href="global.html#event:view-exit"><code>&quot;view-exit&quot;</code></a> events.</p>
<p>See <a href="Session.html#.join">Session.join</a> for how the session id is generated.</p>
<p>If your app has several sessions at the same time, each session id will be different.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>






        
            
<h4 class="name" id="viewId"><span class="type-signature"></span>viewId<span class="type-signature"> :String</span></h4>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Identifies the View of the current user.</strong></p>
<p>All users in a session share the same Model (meaning all model objects) but each user has a different View
(meaning all the non-model state). The <code>viewId</code> identifies each user's view, or more specifically,
their connection to the server.
It is sent as argument in the model-only <a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a> and <a href="global.html#event:view-exit"><code>&quot;view-exit&quot;</code></a>
events.</p>
<p>The <code>viewId</code> is also used as a scope for non-replicated events, for example <a href="global.html#event:synced"><code>&quot;synced&quot;</code></a>.</p>
<p><strong>Note:</strong> <code>this.viewId</code> is different from <a href="View.html#id"><code>this.id</code></a> which identifies each individual view object
(if you create multiple views in your code). <code>this.viewId</code> identifies the local user, so it will be the same
in each individual view object. See <a href="global.html#event:view-join"><code>&quot;view-join&quot;</code></a> event.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">String</span>


        </li>
    </ul>





    <h5>Example</h5>
    
    <pre class="prettyprint"><code>this.subscribe(this.viewId, "synced", this.handleSynced);</code></pre>



        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="detach"><span class="type-signature"></span>detach<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Unsubscribes all <a href="View.html#subscribe">subscriptions</a> this view has,
and removes it from the list of views</strong></p>
<p>This needs to be called when a view is no longer needed, to prevent memory leaks.
A session's root view is automatically sent <code>detach</code> when the session becomes
inactive (for example, going dormant because its browser tab is hidden).
A root view should therefore override <code>detach</code> (remembering to call <code>super.detach()</code>)
to detach any subsidiary views that it has created.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>removeChild(child) {
   const index = this.children.indexOf(child);
   this.children.splice(index, 1);
   child.detach();
}</code></pre>





















        
            

    

    <h4 class="name" id="publish"><span class="type-signature"></span>publish<span class="signature">(scope, event, data<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Publish an event to a scope.</strong></p>
<p>Events are the main form of communication between models and views in Croquet.
Both models and views can publish events, and subscribe to each other's events.
Model-to-model and view-to-view subscriptions are possible, too.</p>
<p>See <a href="Model.html#subscribe">Model.subscribe</a> for a discussion of <strong>scopes</strong> and <strong>event names</strong>.</p>
<p>Optionally, you can pass some <strong>data</strong> along with the event.
For events published by a view and received by a model,
the data needs to be serializable, because it will be sent via the reflector to all users.
For view-to-view events it can be any value or object.</p>
<p>Note that there is no way of testing whether subscriptions exist or not (because models can exist independent of views).
Publishing an event that has no subscriptions is about as cheap as that test would be, so feel free to always publish,
there is very little overhead.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>this.publish("input", "keypressed", {key: 'A'});
this.publish(this.model.id, "move-to", this.pos);</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>see <a href="Model.html#subscribe">subscribe</a>()</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>see <a href="Model.html#subscribe">subscribe</a>()</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>can be any value or object (for view-to-model, must be serializable)</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="subscribe"><span class="type-signature"></span>subscribe<span class="signature">(scope, eventSpec, handler)</span><span class="type-signature"> &rarr; {this}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-tutorial">Tutorials:</dt>
    <dd class="tag-tutorial">
        <ul>
            <li><a href="tutorial-1_4_view_smoothing.html"> View Smoothing</a></li>
        </ul>
    </dd>
    

    

    
</dl>





<div class="description">
    <p><strong>Register an event handler for an event published to a scope.</strong></p>
<p>Both <code>scope</code> and <code>event</code> can be arbitrary strings.
Typically, the scope would select the object (or groups of objects) to respond to the event,
and the event name would select which operation to perform.</p>
<p>A commonly used scope is <code>this.id</code> (in a model) and <code>model.id</code> (in a view) to establish
a communication channel between a model and its corresponding view.</p>
<p>Unlike in a model's <a href="Model.html#subscribe">subscribe</a> method, you can specify when the event should be handled:</p>
<ul>
<li>
<p><strong>Queued:</strong> The handler will be called on the next run of the <a href="Session.html#.join">main loop</a>,
the same number of times this event was published.
This is useful if you need each piece of data that was passed in each <a href="Model.html#publish">publish</a> call.</p>
<p>An example would be log entries generated in the model that the view is supposed to print.
Even if more than one log event is published in one render frame, the view needs to receive each one.</p>
<p><strong><code>{ event: &quot;name&quot;, handling: &quot;queued&quot; }</code> is the default.  Simply specify <code>&quot;name&quot;</code> instead.</strong></p>
</li>
<li>
<p><strong>Once Per Frame:</strong> The handler will be called only <em>once</em> during the next run of the <a href="Session.html#.join">main loop</a>.
If <a href="Model.html#publish">publish</a> was called multiple times, the handler will only be invoked once,
passing the data of only the last <code>publish</code> call.</p>
<p>For example, a view typically would only be interested in the current position of a model to render it.
Since rendering only happens once per frame, it should subscribe using the <code>oncePerFrame</code> option.
The event typically would be published only once per frame anyways, however,
while the model is catching up when joining a session, this would be fired rapidly.</p>
<p><strong><code>{ event: &quot;name&quot;, handling: &quot;oncePerFrame&quot; }</code> is the most efficient option, you should use it whenever possible.</strong></p>
</li>
<li>
<p><strong>Immediate:</strong> The handler will be invoked <em>synchronously</em> during the <a href="Model.html#publish">publish</a> call.
This will tie the view code very closely to the model simulation, which in general is undesirable.
However, if the event handler needs to set up another subscription,
immediate execution ensures that a subsequent publish will be properly handled
(especially when rapidly replaying events for a new user).
Similarly, if the view needs to know the exact state of the model at the time the event was published,
before execution in the model proceeds, then this is the facility to allow this without having to copy model state.</p>
<p>Pass <code>{event: &quot;name&quot;, handling: &quot;immediate&quot;}</code> to enforce this behavior.</p>
</li>
</ul>
<p>The <code>handler</code> can be any callback function.
Unlike a model's <a href="Model.html#subscribe">handler</a> which must be a method of that model,
a view's handler can be any function, including fat-arrow functions declared in-line.
Passing a method like in the model is allowed too, it will be bound to <code>this</code> in the subscribe call.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>this.subscribe("something", "changed", this.update); // "queued" handling implied
this.subscribe(this.id, {event: "moved", handling: "oncePerFrame"}, pos => this.sceneObject.setPosition(pos.x, pos.y, pos.z));</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the event scope (to distinguish between events of the same name used by different objects)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>eventSpec</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>
|

<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>the event name (user-defined or system-defined), or an event handling spec object</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the event name (user-defined or system-defined)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>handling</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p><code>&quot;queued&quot;</code> (default), <code>&quot;oncePerFrame&quot;</code>, or <code>&quot;immediate&quot;</code></p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>handler</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>the event handler (can be any function)</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">this</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="unsubscribe"><span class="type-signature"></span>unsubscribe<span class="signature">(scope, event)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Unsubscribes this view's handlers for the given event in the given scope.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>scope</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>see <a href="View.html#subscribe">subscribe</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>event</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>see <a href="View.html#subscribe">subscribe</a></p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="unsubscribeAll"><span class="type-signature"></span>unsubscribeAll<span class="signature">()</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Unsubscribes all of this views's handlers for any event in any scope.</p>
</div>




























        
            

    

    <h4 class="name" id="future"><span class="type-signature"></span>future<span class="signature">(tOffset)</span><span class="type-signature"> &rarr; {this}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Schedule a message for future execution</strong></p>
<p>This method is here for symmetry with <a href="Model.html#future">Model.future</a>.</p>
<p>It simply schedules the execution using
<a href="https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout">window.setTimeout</a>.
The only advantage to using this over setTimeout() is consistent style.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tOffset</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            
                <td class="default">
                
                    <code>0</code>
                
                </td>
            

            <td class="description last"><p>time offset in milliseconds</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">this</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="random"><span class="type-signature"></span>random<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>Answers <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random()</a></strong></p>
<p>This method is here purely for symmetry with <a href="Model.html#random">Model.random</a>.</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random()</a></p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="now"><span class="type-signature"></span>now<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><p><a href="Model.html#now">Model.now()</a></p></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description">
    <p><strong>The model's current time</strong></p>
<p>This is the time of how far the model has been simulated.
Normally this corresponds roughly to real-world time, since the reflector is generating time stamps
based on real-world time.</p>
<p>If there is <a href="View.html#externalNow">backlog</a> however (e.g while a newly joined user is catching up),
this time will advance much faster than real time.</p>
<p>The unit is milliseconds (1/1000 second) but the value can be fractional, it is a floating-point value.</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>the model's time in milliseconds since the first user created the session.</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="externalNow"><span class="type-signature"></span>externalNow<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>The latest timestamp received from reflector</strong></p>
<p>Timestamps are received asynchronously from the reflector at the specified tick rate.
<a href="View.html#now">Model time</a> however only advances synchronously on every iteration of the <a href="Session.html#.join">main loop</a>.
Usually <code>now == externalNow</code>, but if the model has not caught up yet, then <code>now &lt; externalNow</code>.</p>
<p>We call the difference &quot;backlog&quot;. If the backlog is too large, Croquet will put an overlay on the scene,
and remove it once the model simulation has caught up.
The <a href="global.html#event:synced"><code>&quot;synced&quot;</code></a> event is sent when that happens.</p>
<p>The <code>externalNow</code> value is rarely used by apps but may be useful if you need to synchronize views to real-time.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const backlog = this.externalNow() - this.now();</code></pre>


















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>the latest timestamp in milliseconds received from the reflector</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="extrapolatedNow"><span class="type-signature"></span>extrapolatedNow<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p><strong>The model time extrapolated beyond latest timestamp received from reflector</strong></p>
<p>Timestamps are received asynchronously from the reflector at the specified tick rate.
In-between ticks or messages, neither <a href="View.html#now">now()</a> nor <a href="View.html#externalNow">externalNow()</a> advances.
<code>extrapolatedNow</code> is <code>externalNow</code> plus the local time elapsed since that timestamp was received,
so it always advances.</p>
<p><code>extrapolatedNow()</code> will always be &gt;= <code>now()</code> and <code>externalNow()</code>.
However, it is only guaranteed to be monotonous in-between time stamps received from the reflector
(there is no &quot;smoothing&quot; to reconcile local time with reflector time).</p>
</div>

























<h5>Returns:</h5>

        
<div class="param-desc">
    <p>milliseconds based on local <code>Date.now()</code> but same epoch as model time</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="update"><span class="type-signature"></span>update<span class="signature">(time)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Called on the root view from <a href="Session.html#.join">main loop</a> once per frame. Default implementation does nothing.</p>
<p>Override to add your own view-side input polling, rendering, etc.</p>
<p>If you want this to be called for other views than the root view, you will have to call
those methods from the root view's <code>update()</code>.</p>
<p>The <code>time</code> received is related to the local real-world time. If you need to access the model's time,
use <a href="View.html#now"><code>this.now()</code></a>.</p>
</div>











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>time</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>this frame's time stamp in milliseconds, as received by
<a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame</a>
(or passed into <code>step(time)</code> if <a href="Session.html#.join">stepping manually</a>)</p></td>
        </tr>

    
    </tbody>
</table>



















        
            

    

    <h4 class="name" id="wellKnownModel"><span class="type-signature"></span>wellKnownModel<span class="signature">(name)</span><span class="type-signature"> &rarr; {<a href="Model.html">Model</a>}</span></h4>

    




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description">
    <p>Access a model that was registered previously using  <a href="Model.html#beWellKnownAs">beWellKnownAs()</a>.</p>
<p>Note: The instance of your root Model class is automatically made well-known as <code>&quot;modelRoot&quot;</code>
and passed to the <a href="View.html">constructor</a> of your root View during <a href="Session.html#.join">Session.join</a>.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const topModel = this.wellKnownModel("modelRoot");</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>the name given in <a href="Model.html#beWellKnownAs">beWellKnownAs()</a></p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>the model if found, or <code>undefined</code></p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Model.html">Model</a></span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>





    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>